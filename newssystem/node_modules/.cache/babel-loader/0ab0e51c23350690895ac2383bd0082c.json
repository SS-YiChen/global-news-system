{"ast":null,"code":"var _jsxFileName = \"/Users/sophiali/Desktop/news-system-react-antd/newssystem/src/components/sandbox/SideMenu.js\",\n    _s = $RefreshSig$();\n\nimport { UploadOutlined, UserOutlined, VideoCameraOutlined } from '@ant-design/icons';\nimport { Layout, Menu } from 'antd';\nimport SubMenu from 'antd/lib/menu/SubMenu';\nimport axios from 'axios';\nimport React, { useEffect, useState } from 'react';\nimport { useNavigate, useLocation } from 'react-router-dom';\nimport './index.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst {\n  Sider\n} = Layout; // const menuList = [\n//     {\n//         key: '/home',\n//         title: 'Home',\n//         icon: <UserOutlined />,\n//     },\n//     {\n//         key: '/user-manage',\n//         title: 'User Management',\n//         icon: <UserOutlined />,\n//         children: [\n//             {\n//                 key: '/user-manage/list',\n//                 title: 'User Lists',\n//                 icon: <UserOutlined />,\n//             },\n//         ],\n//     },\n//     {\n//         key: '/right-manage',\n//         title: 'Right Management',\n//         icon: <UserOutlined />,\n//         children: [\n//             {\n//                 key: '/right-manage/role/list',\n//                 title: 'Role Lists',\n//                 icon: <UserOutlined />,\n//             },\n//             {\n//                 key: '/right-manage/right/list',\n//                 title: 'Right Lists',\n//                 icon: <UserOutlined />,\n//             },\n//         ],\n//     },\n// ]\n\nconst iconList = {\n  \"/home\": /*#__PURE__*/_jsxDEV(UserOutlined, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 14\n  }, this),\n  \"/user-manage\": /*#__PURE__*/_jsxDEV(UserOutlined, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 21\n  }, this),\n  \"/user-manage/list\": /*#__PURE__*/_jsxDEV(UploadOutlined, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 56,\n    columnNumber: 26\n  }, this),\n  \"/right-manage/role/list\": /*#__PURE__*/_jsxDEV(VideoCameraOutlined, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 57,\n    columnNumber: 32\n  }, this),\n  \"/right-manage/right/list\": /*#__PURE__*/_jsxDEV(VideoCameraOutlined, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 33\n  }, this)\n};\nexport default function SideMenu() {\n  _s();\n\n  const [menu, setMenu] = useState([]);\n  const navigate = useNavigate();\n  const location = useLocation();\n  useEffect(() => {\n    axios.get(\"http://localhost:5000/rights?_embed=children\").then(res => {\n      //console.log(res.data)\n      setMenu(res.data);\n    });\n  }, []);\n  const {\n    role: {\n      rights\n    }\n  } = JSON.parse(localStorage.getItem('token'));\n\n  const checkPagePermission = item => {\n    return item.pagepermisson && rights.includes(item.key);\n  };\n\n  const renderMenu = menuList => {\n    return menuList.map(item => {\n      var _item$children;\n\n      if (((_item$children = item.children) === null || _item$children === void 0 ? void 0 : _item$children.length) > 0 && checkPagePermission(item)) {\n        return /*#__PURE__*/_jsxDEV(SubMenu, {\n          icon: iconList[item.key],\n          title: item.title,\n          children: renderMenu(item.children)\n        }, item.key, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 21\n        }, this);\n      }\n\n      return checkPagePermission(item) && /*#__PURE__*/_jsxDEV(Menu.Item, {\n        icon: iconList[item.key],\n        onClick: () => {\n          navigate(`${item.key}`);\n        },\n        children: item.title\n      }, item.key, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 17\n      }, this);\n    });\n  }; //console.log(location)\n  // set the hightlight picked item on the menu\n\n\n  const selectKeys = [location.pathname];\n  const openKeys = [\"/\" + location.pathname.split(\"/\")[1]];\n  return /*#__PURE__*/_jsxDEV(Sider, {\n    trigger: null,\n    collapsible: true,\n    collapsed: false,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: \"flex\",\n        height: \"100%\",\n        flexDirection: \"column \"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"logo\",\n        children: \"Global News Publish Management\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          flex: 1,\n          overflow: \"auto\"\n        },\n        children: /*#__PURE__*/_jsxDEV(Menu, {\n          theme: \"dark\",\n          mode: \"inline\",\n          defaultSelectedKeys: selectKeys,\n          defaultOpenKeys: openKeys,\n          children: renderMenu(menu)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 106,\n    columnNumber: 9\n  }, this);\n}\n\n_s(SideMenu, \"euA6OfTivpk47x0f3HmJNOOL4mk=\", false, function () {\n  return [useNavigate, useLocation];\n});\n\n_c = SideMenu;\n\nvar _c;\n\n$RefreshReg$(_c, \"SideMenu\");","map":{"version":3,"names":["UploadOutlined","UserOutlined","VideoCameraOutlined","Layout","Menu","SubMenu","axios","React","useEffect","useState","useNavigate","useLocation","Sider","iconList","SideMenu","menu","setMenu","navigate","location","get","then","res","data","role","rights","JSON","parse","localStorage","getItem","checkPagePermission","item","pagepermisson","includes","key","renderMenu","menuList","map","children","length","title","selectKeys","pathname","openKeys","split","display","height","flexDirection","flex","overflow"],"sources":["/Users/sophiali/Desktop/news-system-react-antd/newssystem/src/components/sandbox/SideMenu.js"],"sourcesContent":["import {\n    UploadOutlined,\n    UserOutlined,\n    VideoCameraOutlined,\n} from '@ant-design/icons';\nimport { Layout, Menu } from 'antd';\nimport SubMenu from 'antd/lib/menu/SubMenu';\nimport axios from 'axios';\nimport React, { useEffect, useState } from 'react';\nimport { useNavigate, useLocation} from 'react-router-dom';\n\nimport './index.css'\n\nconst { Sider } = Layout;\n\n// const menuList = [\n//     {\n//         key: '/home',\n//         title: 'Home',\n//         icon: <UserOutlined />,\n//     },\n//     {\n//         key: '/user-manage',\n//         title: 'User Management',\n//         icon: <UserOutlined />,\n//         children: [\n//             {\n//                 key: '/user-manage/list',\n//                 title: 'User Lists',\n//                 icon: <UserOutlined />,\n//             },\n//         ],\n//     },\n//     {\n//         key: '/right-manage',\n//         title: 'Right Management',\n//         icon: <UserOutlined />,\n//         children: [\n//             {\n//                 key: '/right-manage/role/list',\n//                 title: 'Role Lists',\n//                 icon: <UserOutlined />,\n//             },\n//             {\n//                 key: '/right-manage/right/list',\n//                 title: 'Right Lists',\n//                 icon: <UserOutlined />,\n//             },\n//         ],\n//     },\n// ]\n\nconst iconList = {\n    \"/home\": < UserOutlined />,\n    \"/user-manage\": < UserOutlined />,\n    \"/user-manage/list\": < UploadOutlined />,\n    \"/right-manage/role/list\": < VideoCameraOutlined />,\n    \"/right-manage/right/list\": < VideoCameraOutlined />,\n}\n\nexport default function SideMenu() {\n\n    const [menu, setMenu] = useState([])\n    const navigate = useNavigate();\n    const location = useLocation();\n\n    useEffect( ()=> {\n        axios.get(\"http://localhost:5000/rights?_embed=children\")\n                .then( res => {\n                    //console.log(res.data)\n                    setMenu(res.data)\n                })\n    }, [])\n\n    const {role:{rights}} = JSON.parse(localStorage.getItem('token'))\n\n    const checkPagePermission = item => {\n        return item.pagepermisson && rights.includes(item.key)\n    }\n\n    const renderMenu = (menuList) => {\n        return menuList.map(item => {\n            if (item.children?.length >0 && checkPagePermission(item)) {\n                return (\n                    <SubMenu key={item.key} icon={iconList[item.key]} title={item.title}>\n                        {renderMenu(item.children)}\n                    </SubMenu>\n                )\n            }\n            return checkPagePermission(item) && (\n                <Menu.Item key={item.key} icon={iconList[item.key]} onClick={()=> {\n                    navigate(`${item.key}`)\n                }} >\n                    {item.title}\n                </Menu.Item>\n            )\n        })\n    }\n\n    //console.log(location)\n    // set the hightlight picked item on the menu\n    const selectKeys =[location.pathname]\n    const openKeys = [\"/\" + location.pathname.split(\"/\")[1]]\n\n    return (\n        <Sider trigger={null} collapsible collapsed={false} >\n            <div style={{display:\"flex\", height:\"100%\", flexDirection: \"column \"}}>\n            <div className=\"logo\">Global News Publish Management</div>\n            <div style={{flex:1, overflow:\"auto\"}}>\n            <Menu\n                theme=\"dark\"\n                mode=\"inline\"\n                defaultSelectedKeys={selectKeys}\n                defaultOpenKeys={openKeys}\n            >\n                {renderMenu(menu)}\n            </Menu>\n            </div>\n            </div>\n        </Sider>\n    )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}